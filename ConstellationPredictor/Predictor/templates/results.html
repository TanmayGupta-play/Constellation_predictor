{% extends 'base.html' %}

{% block title %}Analysis Results - Constellation Predictor{% endblock %}

{% block content %}
{% load static %}

<!-- Hero Section -->
<section class="text-center py-20 relative">
    <div class="max-w-7xl mx-auto px-4">
        <h1 class="font-orbitron text-4xl md:text-6xl font-bold mb-6 bg-gradient-to-r from-white to-blue-400 bg-clip-text text-transparent">
            Analysis Complete
        </h1>
        <p class="text-lg md:text-xl mb-10 opacity-80 max-w-2xl mx-auto">
            {% if analysis_type == 'constellation' %}
                Your night sky image has been analyzed for constellation patterns.
            {% else %}
                Regular objects detected in your image.
            {% endif %}
        </p>
    </div>
</section>

<!-- Results Section -->
<section class="py-16">
  <div class="max-w-7xl mx-auto px-4">
    <div class="grid grid-cols-1 gap-12">
      
      <!-- Processed Image -->
      <div class="bg-white/5 rounded-3xl backdrop-blur-sm border border-white/10 p-8">
        <h2 class="font-orbitron text-3xl lg:text-4xl font-bold text-blue-400 mb-6 text-center">
          Processed Image
        </h2>
        <div class="relative">
          <img src="data:image/jpeg;base64,{{ processed_image }}" 
               alt="Processed constellation image" 
               class="w-full rounded-xl border border-white/20 object-contain">
        </div>
      </div>
      
    </div>
  </div>
</section>


<!-- Action Buttons -->
<section class="py-16 bg-black/20">
    <div class="max-w-4xl mx-auto px-4 text-center">
        <h3 class="font-orbitron text-2xl font-semibold text-blue-400 mb-8">
            What's Next?
        </h3>
        <div class="flex flex-col sm:flex-row justify-center gap-4">
            <a href="{% url 'upload' %}" class="px-8 py-3 bg-gradient-to-r from-blue-500 to-blue-400 rounded-full text-white hover:-translate-y-0.5 hover:shadow-lg hover:shadow-blue-500/40 transition-all duration-300 font-medium">
                Upload Another Image
            </a>
            <a href="{% url 'detect' %}" class="px-8 py-3 border border-white/30 rounded-full text-white hover:bg-white/10 transition-all duration-300 font-medium">
                Try Real-Time Detection
            </a>
            <a href="{% url 'database' %}" class="px-8 py-3 border border-white/30 rounded-full text-white hover:bg-white/10 transition-all duration-300 font-medium">
                Browse Database
            </a>
            <a href="{% url 'home' %}" class="px-8 py-3 border border-white/30 rounded-full text-white hover:bg-white/10 transition-all duration-300 font-medium">
                Back to Home
            </a>
        </div>
    </div>
</section>

<!-- Share Results -->


{% endblock %}

{% block extra_js %}
<script>
    // Add some interactive effects
    document.addEventListener('DOMContentLoaded', function() {
        // Animate detection cards
        const detectionCards = document.querySelectorAll('.bg-white\\/5');
        detectionCards.forEach((card, index) => {
            card.style.opacity = '0';
            card.style.transform = 'translateY(20px)';
            setTimeout(() => {
                card.style.transition = 'all 0.5s ease';
                card.style.opacity = '1';
                card.style.transform = 'translateY(0)';
            }, index * 100);
        });

        // Add click-to-expand for constellation details
        const constellationCards = document.querySelectorAll('[data-constellation]');
        constellationCards.forEach(card => {
            card.addEventListener('click', function() {
                // Add your constellation detail expansion logic here
                console.log('Clicked constellation:', this.dataset.constellation);
            });
        });
    });

    // Add floating stars animation
    function createResultStars() {
        const starsContainer = document.createElement('div');
        starsContainer.className = 'fixed inset-0 pointer-events-none z-0';
        document.body.appendChild(starsContainer);

        for (let i = 0; i < 30; i++) {
            const star = document.createElement('div');
            star.className = 'absolute w-1 h-1 bg-blue-400 rounded-full opacity-20';
            star.style.left = Math.random() * 100 + '%';
            star.style.top = Math.random() * 100 + '%';
            star.style.animationDelay = Math.random() * 3 + 's';
            star.style.animation = 'twinkle 4s infinite';
            starsContainer.appendChild(star);
        }
    }

    createResultStars();
</script>

<style>
@keyframes twinkle {
    0%, 100% { opacity: 0.2; }
    50% { opacity: 0.8; }
}

.bg-white\/5:hover {
    background-color: rgba(255, 255, 255, 0.1);
}

/* Smooth scrolling for long detection lists */
.max-h-96 {
    scrollbar-width: thin;
    scrollbar-color: rgba(59, 130, 246, 0.5) rgba(255, 255, 255, 0.1);
}

.max-h-96::-webkit-scrollbar {
    width: 6px;
}

.max-h-96::-webkit-scrollbar-track {
    background: rgba(255, 255, 255, 0.1);
    border-radius: 3px;
}

.max-h-96::-webkit-scrollbar-thumb {
    background: rgba(59, 130, 246, 0.5);
    border-radius: 3px;
}

.max-h-96::-webkit-scrollbar-thumb:hover {
    background: rgba(59, 130, 246, 0.7);
}
</style>
{% endblock %}